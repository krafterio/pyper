<?xml version="1.0" encoding="UTF-8"?>
<odoo>
     <template id="login" inherit_id="web.login">
         <xpath expr="//button[@type='submit']" position="before">
             <script type="text/javascript" src="https://www.google.com/recaptcha/api.js"/>

             <script>
                function onSubmitLogin(token) {
                    document.querySelector(".oe_login_form").submit();
                }
            </script>
         </xpath>

         <xpath expr="//button[@type='submit']" position="attributes">
            <attribute name="class" separator=" " add="g-recaptcha"/>
            <attribute name="t-att-data-sitekey">env['ir.config_parameter'].sudo().get_param('pyper_recaptcha_login.site_key')</attribute>
            <attribute name="data-callback">onSubmitLogin</attribute>
            <attribute name="data-action">submit</attribute>
        </xpath>
    </template>
</odoo>
