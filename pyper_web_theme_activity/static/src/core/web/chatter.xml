<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="pyper_web_theme.Chatter.attachFiles" t-inherit="mail.Chatter.attachFiles" t-inherit-mode="extension">
        <xpath expr="//button[hasclass('o-mail-Chatter-attachFiles')]" position="replace"/>
    </t>

    <t t-name="pyper_web_theme.Chatter" t-inherit="mail.Chatter" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o-mail-AttachmentBox')]" position="attributes">
            <attribute name="t-if" remove="state.isAttachmentBoxOpened"/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-Chatter-top')]" position="attributes">
            <attribute name="class" separator=" " add="p-3 pb-0"/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-AttachmentBox')]/div[1]" position="attributes">
            <attribute name="class" add="d-none" separator=" "/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-Chatter')]" position="attributes">
            <attribute name="class" add="p-0 border-start" separator=" "/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-Chatter')]" position="attributes">
            <attribute name="class" remove="w-100" separator=" "/>
        </xpath>

        <xpath expr="//span[hasclass('o-mail-Chatter-topbarGrow')]" position="replace"/>

        <xpath expr="//div[hasclass('o-mail-Chatter-topbar')]" position="attributes">
            <attribute name="class">o-mail-Chatter-topbar px-0 d-flex align-items-center</attribute>
        </xpath>

        <xpath expr="//button[hasclass('o-mail-Chatter-logNote')]" position="replace">
            <button t-if="props.hasMessageList and canWriteNotes" class="btn btn-secondary btn-quick p-0 me-2 text-nowrap" t-att-class="{
                'btn-primary active': state.composerType === 'note',
                'btn-secondary': state.composerType !== 'note',
                'my-2': !props.compactHeight
            }" data-hotkey="shift+m" t-on-click="() => this.toggleComposer('note')">
                <i class="ph ph-note-pencil"/>
                <i class="btn-quick-counter fa fa-plus"></i>
            </button>
        </xpath>

        <xpath expr="//button[hasclass('o-mail-Chatter-sendMessage')]" position="replace">
           <button t-if="props.hasMessageList" class="o-mail-Chatter-sendMessage btn btn-secondary btn-quick p-0 me-2 text-nowrap" t-att-disabled="!state.thread.hasWriteAccess and !(state.thread.hasReadAccess and state.thread.canPostOnReadonly) and props.threadId" data-hotkey="m" t-on-click="() => this.toggleComposer('message')" title="Send message">
               <i class="ph ph-chat-centered-text"/>
               <i class="btn-quick-counter fa fa-plus"></i>
            </button>
        </xpath>

        <xpath expr="//button[hasclass('o-mail-Chatter-activity')]" position="replace">
           <button t-if="props.hasActivities" class="o-mail-Chatter-activity btn btn-secondary btn-quick me-2 text-nowrap"  data-hotkey="shift+a" t-on-click="scheduleActivity" title="Schedule activity">
               <i class="ph ph-calendar-check fs-2 lh-lg"/>
           </button>
        </xpath>

        <xpath expr="//button[hasclass('o-mail-Chatter-sendMessage')]" position="after">
            <FileUploader
                multiUpload="true"

                fileUploadClass="'o-mail-Chatter-fileUploader'"
                onUploaded.bind="onUploaded"
                onClick="(ev) => this.onClickAttachFile(ev)"
            >
                <t t-set-slot="toggler">
                    <button class="o-mail-Chatter-uploadFile btn btn-secondary btn-quick p-0 me-2 text-nowrap"  type="button" t-att-disabled="!state.thread.hasWriteAccess" title="Attach files">
                        <i class="ph ph-upload"/>
                        <i class="btn-quick-counter fa fa-plus"></i>
                    </button>
                </t>
            </FileUploader>
        </xpath>

        <xpath expr="//Dropdown[@t-if='props.hasFollowers']" position="attributes">
            <attribute name="togglerClass">'o-mail-Followers-button btn btn-secondary btn-quick me-2 position-relative text-nowrap'</attribute>
        </xpath>

        <xpath expr="//button[@t-on-click='onClickUnfollow']" position="after">
            <xpath expr="//button[@t-on-click='onClickSearch']" position="move"/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-AttachmentBox')]//FileUploader" position="replace"/>

        <xpath expr="//button[@t-on-click='onClickFollow']" position="replace"/>

        <xpath expr="//button[@t-on-click='onClickUnfollow']" position="replace">
            <button t-if="props.hasFollowers and state.thread.selfFollower" class="btn btn-secondary btn-quick text-nowrap" t-att-class="{ 'text-primary': !unfollowHover.isHover}" t-att-disabled="!props.threadId" t-on-click="onClickUnfollow" t-ref="unfollow" title="Unfollow">
                <i class="ph-fill ph-toggle-right"/>
            </button>
            <button t-if="!state.thread.selfFollower" class="o-mail-Chatter-follow btn btn-secondary btn-quick text-nowrap" t-on-click="onClickFollow" title="Follow">
                <i class="ph-fill ph-toggle-left"/>
            </button>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-AttachmentBox')]//div[2]" position="attributes">
            <attribute name="class" add="px-3 my-2" separator=" "/>
        </xpath>
    </t>
</templates>
