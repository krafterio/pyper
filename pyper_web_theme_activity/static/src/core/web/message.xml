<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="pyper_web_theme_activity.Message" t-inherit="mail.Message" t-inherit-mode="extension">
        <!-- Message -->
        <xpath expr="//img[hasclass('o-mail-Message-avatar')]" position="attributes">
            <attribute name="class" separator=" " remove="rounded" add="rounded-pill"/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-Message-header')]" position="attributes">
            <attribute name="class" separator=" " remove="align-items-baseline" add="align-items-center"/>
        </xpath>

        <xpath expr="//div[hasclass('o-mail-Message-header')]/span[hasclass('o-mail-Message-author')]" position="before">
            <span class="o-mail-Message-type badge bg-secondary" t-if="message.mail_activity_type_icon or message.mail_activity_type_name">
                <span class="o-mail-Message-type-icon me-2" t-if="message.mail_activity_type_icon">
                    <i class="fa" t-attf-class="{{ message.mail_activity_type_icon }}"/>
                </span>

                <span class="o-mail-Message-type-name" t-if="message.mail_activity_type_name" t-out="message.mail_activity_type_name"/>
            </span>

            <span class="o-mail-Message-type badge bg-secondary o-mail-Message-type-note pe-1" t-elif="message.is_note">
                <span class="o-mail-Message-type-icon me-2">
                    <i class="fa fa-sticky-note"/>
                </span>

                <span class="o-mail-Message-type-name">Note</span>
            </span>

            <span class="mx-1" t-if="message.mail_activity_type_icon or message.mail_activity_type_name or message.is_note">by</span>
        </xpath>

        <!-- Tracking values -->
        <xpath expr="//li[hasclass('o-mail-Message-tracking')]/span[hasclass('o-mail-Message-trackingOld')]" position="before">
            <xpath expr="//li[hasclass('o-mail-Message-tracking')]/span[hasclass('o-mail-Message-trackingField')]" position="move"/>
        </xpath>

        <xpath expr="//li[hasclass('o-mail-Message-tracking')]/span[hasclass('o-mail-Message-trackingField')]" position="replace">
            <span class="o-mail-Message-trackingField me-1"><t t-out="trackingValue.changedField"/> :</span>
        </xpath>

        <xpath expr="//li[hasclass('o-mail-Message-tracking')]/span[hasclass('o-mail-Message-trackingOld')]" position="attributes">
            <attribute name="class" separator=" " remove="text-muted fw-bold"/>
        </xpath>

        <xpath expr="//li[hasclass('o-mail-Message-tracking')]/span[hasclass('o-mail-Message-trackingNew')]" position="attributes">
            <attribute name="class" separator=" " remove="text-info fw-bold"/>
        </xpath>
    </t>
</templates>
