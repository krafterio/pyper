<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="pyper_dashboard.DashboardView">
        <div class="pyper_dashboard d-flex flex-column" t-att-class="this.dashboardClasses">
            <t t-call="pyper_dashboard.DashboardHeader"/>

            <t t-if="dashboard.isEmpty">
                <t t-call="pyper_dashboard.DashboardNoContent"/>
            </t>
            <t t-else="">
                <t t-call="pyper_dashboard.DashboardContent"/>
            </t>
        </div>
    </t>

    <t t-name="pyper_dashboard.DashboardHeader">
        <div class="pyper_dashboard--header">
            <div>
                <h2 t-if="dashboard.title" t-out="dashboard.title"/>
                <h2 t-else="" t-out="selectedBoard?.full_name"/>
            </div>

            <div class="flex-grow-1 ps-2" t-if="dashboard.useSwitcher and boards.length > 1">
                <Dropdown togglerClass="'btn btn-outline-default px-2 py-1'">
                    <t t-set-slot="toggler">
                        <i class="fa fa-fw fa-chevron-down" aria-label="Dashboard switcher" role="img" title="Dashboard switcher"/>
                    </t>

                    <t t-foreach="categoryBoards" t-as="category" t-key="category.id">
                        <hr class="dropdown-divider"/>
                        <div class="dropdown-header" t-out="category.name" t-if="category.name"/>

                        <t t-foreach="category.boards" t-as="board" t-key="board.id">
                            <DropdownItem onSelected="() => this.selectBoard(board)" class="'ps-4'">
                                <t t-out="board.name"/>
                            </DropdownItem>
                        </t>
                    </t>
                </Dropdown>
            </div>

            <div>
                <Dropdown
                    togglerClass="'btn btn-outline-default py-1'"
                    t-if="filteredOptionsItems.length > 0"
                >
                    <t t-set-slot="toggler">
                        <i class="fa fa-fw fa-ellipsis-v" aria-label="Options" role="img" title="Options"/>
                    </t>

                    <t t-foreach="filteredOptionsItems" t-as="item" t-key="item.id">
                        <DropdownItem onSelected="item.onSelected">
                            <i t-attf-class="item.icon"></i>
                            <t t-out="item.label"/>
                        </DropdownItem>
                    </t>
                </Dropdown>
            </div>
        </div>
    </t>

    <t t-name="pyper_dashboard.DashboardContent">
        <div class="pyper_dashboard--container" t-ref="main">
            <t t-foreach="dashboard.sections" t-as="section" t-key="section_index">
                <DashboardSection
                    title="section.title"
                    layout="section.layout"
                    attr="{'data-idx': section_index}"
                >
                    <t t-foreach="section.columns" t-as="column" t-key="column_index">
                        <DashboardColumn attr="{'data-idx': column_index}">
                            <t t-foreach="column.actions" t-as="action" t-key="selectedBoard?.id + '__' + action.id">
                                <DashboardAction
                                    title="action.title"
                                    actionId="action.actionId"
                                    viewMode="action.viewMode"
                                    context="action.context"
                                    domain="action.domain"
                                    attr="{'data-idx': action_index}"
                                />
                            </t>
                        </DashboardColumn>
                    </t>
                </DashboardSection>
            </t>
        </div>
    </t>

    <t t-name="pyper_dashboard.DashboardNoContent">
        <div class="o_view_nocontent">
            <div class="o_nocontent_help">
                <p class="o_view_nocontent_neutral_face">
                  Dashboard is empty
                </p>

                <p>
                  To add your first graph into this dashboard, go to any
                  menu, switch to list or graph view, and click <i>"Add to
                  dashboard"</i> in the extended search options.
                </p>

                <p>
                  You can group and filter data before inserting into the
                  dashboard using the search options.
                </p>
            </div>
        </div>
    </t>
</templates>
